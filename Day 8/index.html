<!DOCTYPE html>
<html>
<head>
  <title>Treetop Tree House</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    canvas {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <script src="https://unpkg.com/three@0.114.0/build/three.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/three@0.117.0/examples/js/controls/OrbitControls.js"></script>
  <script>
    const gridSpacing = 10;
    let data = "011112220220323233332231343014141131140112421211413355234334024414242133303312210313023000021220102\n221002103112233201234202003421134043024153515443332415451142151141323114321301434333033210022221022\n201200003311133331441214403131041312551423522332422531524232533513033233434420203421023110323221022\n121121213131010131201002413232224444334133213322251443153145222321552044232113011214212110102102211\n212113303331021314321111140111522454555135544314235452234224545142541330223322222234211031300120220\n010212031223201244112200401335253221225255255322553133211323513113422143522323420011223321133113101\n011020312301013040344114333334442144514455512552221415123255124524531151554104224200443112211210031\n212103301320231332441144214355422451145143521345255326544451431544214432121550112030101122302303021\n220232122110131143411335344551322314153422353555245353522346615142142533512423212340133002223102320\n123203222223430330030314515252515255254362252265436645524643534633245232434155413030142133001200320\n232211213322123322103442125511131155663325635553522434545445552266442151514322444424100420020000011\n321232322313243000453341414523445426226644644265452262664344634465246122122543132514120020411332033\n202331334121420235323225354242425245652324266442344526232654535245252651555215135125041401014413003\n030112100334314051222325325124636325444634664346624462255253366255466452513431325251113413144442330\n020200433043320152232154136232564443545365465255646653263522363554354564422421324241211021000140121\n032011132023104255151145246424353264523526344436554334475646444542435562556325335443513020140421120\n210204303043241221415453653453366254565373457364675545654666377423454542265263342335255230433142310\n210312323220343143353556243436325432556736764666334633457533745332644345623536221544225432033020410\n233410214315423344423442656226454445357767646343373565363645755734732354353645223242442442112322443\n322403301001251255154242326443445466736576466455545656643435677365674243235222245343143455320114330\n232343201234134131134332335444557474363474446344776366756565574535744735324323246532552555432040041\n221232224415533122543465364445435364564576534743763474566355767775774577553544653464142513144443313\n122112442244542214262445665475477545734565457478857667547473567477336557726442444644441243444402330\n143012145515212424235524535555733334457686447444847564554866735433374643763343245542354341522310301\n343034021325435535455442355474677535777784688864647648684444458747443667643423643452544435114443124\n000403451411241463226443476733365546877644754747566667486574544543776475363624545332334511311214303\n013002242525556352626433636455377384766855876756685885854848875568474373437675532433635212321111322\n101010142252123346235437467476546685846885866865567487856755684744544675575633223264225545223542222\n342002313434136635656244356646468576664565586756447555664585478665556463354555546643556622525525002\n304211422335342355323755634454757484685568785668995686856577754577844777634756472362366633324314412\n231133244553256623647336646666864756787445877675585597686594886667647464354533657554554353332112524\n120344321215652622227445664658856658787585889889659567969656785855874777755473764556264244443152242\n440423214313632526376434563658657485749798857588556576776776858587648478466464663564663336325425331\n011254331316253653674574346456874647667888866559779658686765656768765578865554674352333225544221323\n023413144524364645635675736677586666956885689798886598595799575656874764865373535644332466511331341\n122254414355225323664755365568758589577679686887799795759896779887545576777454544375265466443443235\n412421452563253445537467347658777879785759567968966967575558955868854646578873575357565236511122521\n015221314664564236645543668766675798567999788879796666869699657885985874547845773566464625361212125\n213255112624445653744634755467766595886577869989896967967796599685695675888763355455363352561531455\n051115255524443264764435668448576976667776669978668998866669987997588887564444673776525636555252522\n315344432555344664633555485554469988678878999897687977797786889787978545858784436346566536662543432\n342334532442256655765436787556789957565686789788896899987689678797579887867778443435552454223234514\n044222226353425754474346685474575657758678966697998869888679776868568567678584464343643446543142315\n144512246654532464343347645766565789898698789788997968679687989758869974574466636667665323253213321\n154415255624566636654388858668758665689978996897979798788878699767976598455446474765435324456113342\n222333513555245346467374666655885657577998667798797888978998868866957797665858765377465234256133231\n345551444536645634576788887678768556687766667898989777979999976777866956665855476574554565645424315\n214425354332335634336444556745876659867688868787798798879898768996785655575686846567542442554353234\n411151526365526435763654766745695769989997787877899999777677796975768665578855433353537425364324435\n522535522334266753767645655578787759999797977799978897877967869699787686678555733446763633345235242\n434554556234464756756646566577685856698867888798779989897888768886756666848455565474773255436431353\n442445343526335577465554675665559886897887778777987888778968877985997667668778573677767566543431434\n211451552626333634363465768567858685978899767778888797787769889997886696648488453374457335426324331\n352321245665435473457546867457579566688987988898999788977968676875958875756786856557334623665613554\n134251534254346364373746868447957667578688897887888977799998977767868758754674643636734354455334533\n245245423445544557373667445675755587897766677987799879977688696665989986846448873477364262625234454\n145224324344246776343755754785995768789786888699787788766886767677965697467477553656766544246513254\n324145213325563543644657785454865677777876788869778868797668787676695555668476343574675463435354251\n413445215463653557663646785857989685956686966678678698889778897766895898544664356673734242234254124\n034351535553342544655674756865698875897888787897688768789698799656958666567856653353444644544544421\n133431555226353336664734658784788759769799696889799686678886856966568675647876755663336364665314322\n352533334635454546743545675475565978755677998676889876879868566868875574457747644333625466224445225\n355351222554253337357543454756675876989667686867777777888979575678967457886686766643322426625255125\n301424431256355654573454748776556985989986569888688898788856597696575488864856754567355352241115321\n334321351343534467436553584585445758875669977678797666578677575578655877475477536443424544521454224\n013544235464335336476633477774477476686866559855687876665969679665764854667467373455335366315243233\n112151451535653464334745366774754847778758859698679755768697858997878486758757546343322225255512514\n443545411335354445544673335765684574789589677978989757787667778688476787477664364445336662115531221\n443244544145445266247734664546768464658669796775859668897565658658468857653377655436433366414135313\n010252534423256334446667573476457575487596776895885755586667884466654888463534655556544243135421414\n014442551411344322466653454757848477584476886899967686787665786647774457465756356452536324535435123\n334422335251334244533574565465486878485446665569659976696474654844488654654664446434222541455145113\n422042222114544645653646637673357446446767657686784455466855674884758555555655725563322345443214311\n402101351333342265545553643374447487578876487756686755567778855457564663644744556325335113252214413\n020401432452525465462342675634576768765558475768546747458444657465736777435756524535423151534540433\n243400241421422365236324343433537655646765656686868457744888876887645466644353552522561443452110131\n003103135121351256222624237444364336577744656885555668476484458534564557546523454435651431352134341\n442201144132352152442423554634347545537756888457774564788446865557333633753246362522533121322124221\n042304405522541234526265624675463537343637577754484575664343357636766467765454625421455125252421130\n314110031551545454255523645535756377673434677564574657764673676766535556624242334545542323234044343\n041012332333325345165432634364576475755744555334564654644333744353563644464423523312312411403444121\n124302121131253134543646522633333333576373775465555676773747353674453633545332653355411213114300403\n302411422212352135214225645652536667357533357667635654377766436757352425435362534153522532340243120\n203202223241334312122414443425254534435347434576567673567635537464322534362435145114215322422004201\n110342140441034112531143666254342264344435346667664677454757336354363455622352232125251133310231303\n300304343314324221532432445663443563562366357346443374734472246525566435265232524142512222034111133\n202233112212120515131252235262346544266665653664554636565424424235234433226241324545132240232410001\n332313111224211043414543212336356265244525555535245664242355426664325225354122332125233004041231313\n212202242323141205314235551145533455663632653424353364426426265425636324111513154352142322133233021\n222001223102021231253525543223522653656656533626646546323265643636332221114125535230342011132023003\n131321002042102021303551143221352255263646432525653222536364426366255225412113334103102433030120120\n123013232113443113004333513541141433446563565453423353632226246342532522253511543223024330220123232\n020100001122004013021214144132214525141333344452225255633226351331523254423535242210042134110021313\n000032312330431022234112313521113225332255235165644226445131125441512142114320042430310221111210323\n222131320213212322000341013532113515512425422422531545412311135522225313553330241403034233001021201\n102232032332111012030031433325455242543415353325354325411434155351223114403024214003424030023121101\n001023120230001141401143210134432545451343542414432432444534422135454111411010334001323200230022022\n020210023322210014243401240134314541235251513215515342432345433232312001040222232101223203330221220\n022010220332323232024402340343441321225445453325151544211235521343432303124012101020011220000301222\n";
    
    data = data.split("\n")
    let treeGrid = []

    for (let gridRow = 0; gridRow < data.length; gridRow++) {
      const row = data[gridRow];
      treeGrid.push(row.split(""));
    }


    // Create a new 3D scene.
    const scene = new THREE.Scene();
    // scene.background({color: 0x0000FF})
    scene.background = new THREE.Color( 0x38eeff );

    // Create a new perspective camera.
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    // camera.lookAt(0, 0, 0);

    // Set the position of the camera.
    camera.position.z = 10;

    // Create a new renderer.
    const renderer = new THREE.WebGLRenderer();

    const controls = new THREE.OrbitControls( camera, renderer.domElement );

    camera.position.set( 0, 20, 100 );

    // Set the size of the renderer.
    renderer.setSize(window.innerWidth, window.innerHeight);

    // Add the renderer to the page.
    document.body.appendChild(renderer.domElement);

    // Define the material for the trees.
    const material = new THREE.MeshBasicMaterial({ color: new THREE.Color(`rgb(34, 140, ${Math.floor(Math.random() * 255)})`) });
    const trunkMaterial = new THREE.MeshBasicMaterial({ color: new THREE.Color(`rgb(76, 51, 34)`) });

    // Create a group to hold the trees.
    const group = new THREE.Group();

    // Add a tree for each cell in the grid.
    for (let i = 0; i < treeGrid.length; i++) {
      const row = treeGrid[i];
      for (let j = 0; j < row.length; j++) {

        if (row[j] > 0) {
          
        //#region tree
            // Create a new cone geometry for the tree's trunk.
            const trunkGeometry = new THREE.ConeGeometry(1, 5, 32);

            // Create a new mesh for the tree's trunk.
            const trunkMesh = new THREE.Mesh(trunkGeometry, trunkMaterial);

            // Set the position of the tree's trunk.
            trunkMesh.position.y = 2.5;

            // Create a new cone geometry for the tree's canopy.
            const canopyGeometry = new THREE.ConeGeometry(4, 10, 32);

            // Create a new mesh for the tree's canopy.
            const canopyMesh = new THREE.Mesh(canopyGeometry, material);

            // Set the position of the tree's canopy.
            canopyMesh.position.y = 7.5;

            // Create a new group to hold the tree's trunk and canopy.
            const tree = new THREE.Group();

            // Add the tree's trunk and canopy to the group.
            tree.add(trunkMesh);
            tree.add(canopyMesh);
            tree.position.set((i + gridSpacing), 0, (j + gridSpacing));
            tree.scale.set(.1, row[j] / 10, .1);

            // Add the tree to the scene.
            scene.add(tree);
        //#endregion

        // Add the tree to the group.
        group.add(tree);
        }
        // Create a new mesh for the tree.
      }
    }
        // Add the group of trees to the scene.
    scene.add(group);



    // add floor
    const geometry = new THREE.PlaneGeometry( 0, 0 );
    const plane = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( {color: 0xffffff, side: THREE.BackSide} ) );
    plane.rotation.x = Math.PI / 2;
    plane.scale.set(500, 500, 500)
    scene.add( plane );

    // Define a function to update the camera position and render the scene.
    function update() {
    // Update the camera position.
    // camera.position.x += 0.1;

    // Render the scene using the camera.
    renderer.render(scene, camera);

    // Call the update function again on the next frame.
    requestAnimationFrame(update);
    }

    // Start the update loop.
    controls.update();
    update();
</script>
</body>
</html>